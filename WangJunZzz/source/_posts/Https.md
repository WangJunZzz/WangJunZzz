---
title: Https
date: 2019-08-27 20:19:14
tags:
---

+ Http的定义
    - http提供了一组规则和标准，从而让信息能够在互联网上进行传播。
    - http 超文本传输协议；tcp 传输控制协议 ；ip 网间协议；
    - 通过ip地址+协议+端口标识网络中的一个进程，标识唯一一个进程之后，就可以进行socket通信了，socket是应用层和传输层之间的一个抽象层，它把tcp/ip层复杂的操作抽象为几个简单的接口提供给应用层调用，实现网络中的通信。
    - socket是对tcp/ip的封装，socket本事并不是协议，而是一个调用接口，通过socket，我们才能使用tcp/ip协议。

+ TCP/IP 五层模型
    - 应用层：负责应用程序之间的沟通。网络编程主要针对的就是应用层,（http,ftp,邮件协议[SMTP、POP3、IMAP4]）
    - 传输层：负责两台主机之间的数据传输,(tcp)
    - 网络层：负责地址管理和路由选择。路由器工作在网络层,(ip)
    - 数据链路层：负责设备之间的数据帧的传输和识别。交换机工作在数据链路层。例如网卡设备的驱动，帧同步，冲突检测，数据差错校验等工作,(以太网协议)
    - 物理层：负责光电信号传递方式。集线器工作在物理层。以太网协议

+ http是无状态
    - http是基于tcp/ip协议，当一个tcp连接关闭之后，所有的http请求和响应信息全部消失，在http中，客户端通过socket技术创建一个tcp/ip连接，并且连接到服务器，完成信息交换后，就会关闭tcp连接。所谓的无状态就是每次完成请求后,不会在客户端和服务端保存任何信息，对于客户端和服务端来说，根本不知道上次的请求信息是什么，它的生命周期随着tcp/ip的关闭结束了。
    - http本事是不能传输的，需要通过网络层中的其他协议进行通信，一般构建在tcp之上，tcp提供一个可靠的，面向连接的传输服务。

+ 协议不安全的原因
    - 数据没有加密
    - 无法验证身份
    - 数据容易篡改

+ 对称加密算法
    - 块密码算法 - 每次对固定长度的数据库进行加密，可能要经过一次或者多次运算，最终得到密文。
    - 流密码算法 - 明文和同样长度的序列进行XOR运算得到密文。密文与加密使用的序列再进行XOR运算得到明文。
    
+ 非对称加密算法(公开密钥算法)
    - 和对称加密算法功能不一样，用来加密和解密，密钥协商，数字签名。
    - 密钥是一对（公钥和私钥）
    - 运行速度很慢，公开加密算法尤其是RSA算法运行非常缓慢，一般情况下，需要加密得明文数据很大，如果用非对称加密算法，运行性能会惨不忍睹。

+ 消息验证码 MAC(message authentication code)
    - hash算法能够实现完整性校验，但是不能避免消息被篡改，为避免消息被篡改，需要用到消息验证码。
    - 发送方和接收方维护一个密钥，然后生成验证消息码，可以和原始消息一起传递，原始消息也可以加密，接收方比较mac值。

+ HTTP+LTS/SSL协议组合在一起就是https，就是说https拥有http得所有特征，并且http消息由TLS/SSL协议进行安全保护。
    - 客户端发送https请求就是连接服务器443端口，讲所有得http数据传递给TLS/SSL协议，最终由TLS/SSL协议传递给TCP传输层。
    - TLS/SSL协议三大核心步骤：认证，密钥协商，数据加密。
    - 在HTTPS协议中，客户端和服务端双方是互相不认识得，客户端可以是世界上任何一台机器得浏览器，必须采用动态密钥分配方式，这个时候密钥协商算法就出场了。
    - 在公开密钥算法中，所有的网络通信都会存在中间人攻击，在https中必须引入PKI技术解决身份验证的问题，PKI的核心技术就是证书。PKI技术能够确保客户端接收到的服务器公钥确实是期待服务端的公钥。